(window.webpackJsonp=window.webpackJsonp||[]).push([[26,7,14],{601:function(e,t,n){"use strict";n.r(t);var r=n(591),d={props:{color:{type:String,default:null},message:{type:String,default:null}}},o=n(31),component=Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center",on:{click:function(t){return e.$emit("click")}}},[t(r.a,{attrs:{color:e.color}},[e._v(e._s(e.message))])],1)}),[],!1,null,null,null);t.default=component.exports},602:function(e,t,n){"use strict";n.r(t);var r=n(241),d=n(31),component=Object(d.a)({},(function(){var e=this._self._c;return e("div",{staticClass:"text-center"},[e(r.a,{attrs:{indeterminate:""}})],1)}),[],!1,null,null,null);t.default=component.exports},690:function(e,t,n){"use strict";n.r(t);var r=n(240),d=n(572),o=n(612),c=n(597),l=n(155),m=n(1),f=n(22),v=(n(63),n(85),n(4),n(8),n(7),n(10),n(13),n(11),n(14),n(616)),h=n(617),_=n(618);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={layout:"customer",data:function(){return{demandTypes:v.a,demandTypeLabel:v.c,demandTypeIcon:v.b,demandPriorityLabel:_.c,demandPriorityColor:_.b,demandStatus:h.a,demandStatusLabel:h.b,demandPriorities:_.a,demands:null,addDemand:!1,activeDemand:null,showStatus:h.a[0],filters:{}}},computed:{hasDemandsInProgress:function(){return this.demands.find((function(e){return"in-progress"===e.status}))},hasPendingDemands:function(){return this.demands.find((function(e){return"backlog"===e.status&&!e.estimated}))},hasDemand:function(){var e=this;return this.demands.find((function(t){return e.showStatus.value===t.status}))},demand:function(){var e=this;return this.$route.query.demanda&&this.demands?this.demands.find((function(t){return t._id===e.$route.query.demanda})):null}},mounted:function(){this.loadDemands()},methods:{isActive:function(e){return this.activeDemand&&this.activeDemand._id===e._id},loadDemands:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=D(D({},e.filters),{},{customer:e.customer._id}),t.next=3,e.$axios.$get("/v1/demands",{params:n});case 3:e.demands=t.sent,e.hasDemandsInProgress&&!e.hasPendingDemands&&(e.showStatus=h.a[1]);case 5:case"end":return t.stop()}}),t)})))()},openDemand:function(e){this.$router.push("/"+this.customer._id+"/demandas?demanda="+e._id)},demandCreated:function(e){var t=this;return Object(f.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.addDemand=!1,n.next=3,t.loadDemands();case 3:t.loadSummary(),t.openDemand(e);case 5:case"end":return n.stop()}}),n)})))()},demandUpdated:function(e){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadDemands();case 2:t.loadSummary();case 3:case"end":return e.stop()}}),e)})))()},removeDemand:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$delete("/v1/demands/".concat(e.activeDemand._id));case 2:e.closeDemand(),e.loadDemands(),e.loadSummary();case 5:case"end":return t.stop()}}),t)})))()},closeDemand:function(){this.$router.push("/"+this.customer._id+"/demandas")},loadSummary:function(){this.$store.dispatch("loadCustomerSummary")}}},O=n(31),component=Object(O.a)(w,(function(){var e=this,t=e._self._c;return t("div",[e.customer?t(c.a,[t(r.a,{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"success"},on:{click:function(t){e.addDemand=!0}}},[t(l.a,[e._v("mdi-plus")])],1),e._v(" "),t("div",{staticClass:"d-flex justify-space-around"},e._l(e.demandStatus,(function(n){return t(r.a,{key:n.value,staticStyle:{"min-width":"32%",padding:"24px 8px"},attrs:{"x-small":"",color:e.showStatus.value===n.value?"success":"secondary lighten-1"},on:{click:function(t){e.showStatus=n}}},[e._v("\n        "+e._s(n.label)+"\n      ")])})),1),e._v(" "),t("div",{staticClass:"pt-6"},[t("div",[e.demands?t("div",[e.hasDemand?e._e():t("div",[t("Alert",{attrs:{message:"Nenhuma demanda aqui"}})],1),e._v(" "),e._l(e.demands,(function(n){return[n.status===e.showStatus.value?t(d.a,{key:n._id,staticClass:"mb-3 pa-3",attrs:{elevation:"0"},on:{click:function(t){return e.openDemand(n)}}},[t("h4",{staticClass:"mb-2"},[e._v(e._s(n.title))]),e._v(" "),t("div",[t("div",{staticClass:"mb-3"},[t("DemandEstimate",{attrs:{demand:n}})],1),e._v(" "),t("div",{staticClass:"d-flex justify-space-between align-start"},[t("div",[n.type?t(o.a,{staticClass:"text--secondary",attrs:{outlined:"",small:""}},[e._v("\n                      "+e._s(e.demandTypeLabel(n.type))+"\n                    ")]):e._e(),e._v(" "),n.approved&&"backlog"===n.status?t(o.a,{attrs:{outlined:"",small:"",color:"success"}},[t(l.a,{attrs:{left:"",small:""}},[e._v(" mdi-low ")]),e._v("\n                      Aprovada\n                    ")],1):e._e()],1),e._v(" "),n.priority?t(o.a,{staticClass:"justify-center",staticStyle:{"min-width":"60px"},attrs:{outlined:"",small:"",color:e.demandPriorityColor(n.priority)}},[e._v("\n                    "+e._s(e.demandPriorityLabel(n.priority))+"\n                  ")]):e._e()],1)])]):e._e()]}))],2):t("Loading")],1)]),e._v(" "),e.addDemand?t("DemandForm",{on:{input:e.demandCreated,close:function(t){e.addDemand=!1}}}):e._e(),e._v(" "),e.demand?t("Demand",{attrs:{demand:e.demand},on:{input:e.demandUpdated,close:e.closeDemand,remove:e.removeDemand}}):e._e()],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Alert:n(601).default,DemandEstimate:n(656).default,Loading:n(602).default,DemandForm:n(657).default,Demand:n(667).default})}}]);