(window.webpackJsonp=window.webpackJsonp||[]).push([[13,20,21,29],{516:function(e,t,r){"use strict";r.r(t);var n={props:{invalid:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!0},label:{type:String,default:"Salvar"}}},o=r(62),c=r(63),l=r.n(c),m=r(511),d=r(208),v=r(186),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.invalid?r("v-alert",{staticClass:"d-flex justify-center",attrs:{type:"error"}},[e._v("\n    Você deve corrigir os erros acima antes de salvar\n  ")]):e._e(),e._v(" "),r("v-btn",{staticClass:"mb-4 mt-4 font-weight-bold text-none",attrs:{"x-large":"",type:"submit",color:"primary",disabled:e.invalid||e.loading,block:e.block,rounded:""}},[e.loading?r("v-progress-circular",{attrs:{color:"secondary",indeterminate:"",size:"20"}}):r("span",[e._v(e._s(e.label))])],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:m.a,VBtn:d.a,VProgressCircular:v.a})},517:function(e,t,r){"use strict";r.r(t);var n={methods:{close:function(){this.$emit("close")}}},o=r(62),c=r(63),l=r.n(c),m=r(208),d=r(514),v=r(561),f=r(205),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"d-flex align-center justify-space-between"},[n("div",{staticClass:"d-flex align-center"},[n("img",{staticClass:"logo",attrs:{src:r(237)}}),e._v(" "),n("span",{staticClass:"ml-3"},[n("strong",[e._v("Cultivar")]),e._v(" Digital")])]),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),n("v-divider")],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VBtn:m.a,VContainer:d.a,VDivider:v.a,VIcon:f.a})},531:function(e,t,r){"use strict";r.r(t);var n=r(62),o=r(63),c=r.n(o),l=r(186),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-center"},[t("v-progress-circular",{attrs:{indeterminate:""}})],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VProgressCircular:l.a})},571:function(e,t,r){"use strict";r.r(t);r(32),r(25),r(64);var n={props:{value:{type:Number,default:null},label:{type:String,default:null}},data:function(){return{v:this.value||0}},methods:{updateValue:function(){if(this.v){var e=Number(this.v.replace("R$ ","").replace(/\./g,"").replace(",","."));this.$emit("input",e)}else this.$emit("input",0)}}},o=r(62),c=r(63),l=r.n(c),m=r(567),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",{directives:[{name:"money",rawName:"v-money",value:{decimal:",",thousands:".",precision:2},expression:"{ decimal: ',', thousands: '.', precision: 2 }"}],attrs:{label:e.label,outlined:""},on:{input:e.updateValue},model:{value:e.v,callback:function(t){e.v=t},expression:"v"}})}),[],!1,null,null,null);t.default=component.exports;l()(component,{VTextField:m.a})},601:function(e,t,r){"use strict";r.r(t);r(11),r(13),r(18),r(19);var n=r(22),o=r(3),c=(r(71),r(4),r(15),r(12),r(184),r(144));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var m={components:{ValidationObserver:c.a,ValidationProvider:c.b},props:{customer:{type:Object,default:function(){return null}}},data:function(){return{form:{name:"",corporate_name:"",cnpj:"",address:"",phone:"",email:"",notes:"",point_price:0,point_unit:"hour",points_per_day:0}}},computed:{baseUrl:function(){return"http://localhost:3000"}},created:function(){var e=this;this.customer&&Object.keys(this.form).forEach((function(t){e.customer[t]&&(e.form[t]=e.customer[t])}))},methods:{save:function(){var e=this,form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.form);this.customer?this.$axios.$patch("/v1/customers/"+this.customer._id,form).then((function(t){e.$notifier.success("Atualizado!"),e.$emit("input",t)})):this.$axios.$post("/v1/customers",form).then((function(t){e.$notifier.success("Salvo!"),e.$emit("input",t)}))},toggleMonth:function(e){this.active_month===e?this.active_month=null:this.active_month=e},removeItem:function(e,t,r){this.form.data[e-1][t-1].splice(r,1)},copy:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,navigator.clipboard.writeText(e);case 2:t.notify("Copiado!");case 3:case"end":return r.stop()}}),r)})))()},close:function(){this.$emit("close")}}},d=m,v=r(62),f=r(63),h=r.n(f),_=r(208),x=r(545),C=r(514),y=r(673),$=r(570),k=r(205),w=r(567),O=r(576),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:!0,fullscreen:"",persistent:""}},[r("v-card",{staticClass:"template-form"},[r("DialogHeader",{on:{close:e.close}}),e._v(" "),r("v-container",{staticClass:"pt-6"},[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.validate,o=t.invalid;return[r("v-form",{on:{submit:function(t){t.preventDefault(),n().then(e.save)}}},[r("validation-provider",{attrs:{name:"Nome da empresa",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{label:"Nome da empresa",outlined:"","error-messages":n},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)}),e._v(" "),r("v-text-field",{attrs:{label:"Razão social",outlined:""},model:{value:e.form.corporate_name,callback:function(t){e.$set(e.form,"corporate_name",t)},expression:"form.corporate_name"}}),e._v(" "),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["##.###.###/####-##"],expression:"['##.###.###/####-##']"}],attrs:{label:"CNPJ",outlined:""},model:{value:e.form.cnpj,callback:function(t){e.$set(e.form,"cnpj",t)},expression:"form.cnpj"}}),e._v(" "),r("v-textarea",{attrs:{rows:"2",label:"Endereço",outlined:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),e._v(" "),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],attrs:{label:"Telefone de contato",outlined:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e._v(" "),r("v-text-field",{attrs:{label:"Email de contato",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("v-textarea",{attrs:{label:"Observações",outlined:""},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}}),e._v(" "),"admin"===e.$auth.user.role?r("div",[r("v-text-field",{attrs:{label:"Pontos por dia",outlined:""},model:{value:e.form.points_per_day,callback:function(t){e.$set(e.form,"points_per_day",t)},expression:"form.points_per_day"}}),e._v(" "),r("Money",{attrs:{label:"Preço do ponto"},model:{value:e.form.point_price,callback:function(t){e.$set(e.form,"point_price",t)},expression:"form.point_price"}})],1):e._e(),e._v(" "),e.customer?r("v-btn",{staticClass:"mb-6",attrs:{small:""},on:{click:function(){return e.copy(e.baseUrl+"/cadastrar?cliente="+e.customer._id)}}},[r("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-content-copy ")]),e._v("\n            Copiar link de cadastro\n          ")],1):e._e(),e._v(" "),r("div",{staticClass:"text-right"},[r("Save",{attrs:{invalid:o,block:!1,label:"Salvar"}})],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{DialogHeader:r(517).default,Money:r(571).default,Save:r(516).default}),h()(component,{VBtn:_.a,VCard:x.a,VContainer:C.a,VDialog:y.a,VForm:$.a,VIcon:k.a,VTextField:w.a,VTextarea:O.a})},625:function(e,t,r){"use strict";r.r(t);var n=r(22),o=(r(71),r(25),r(249),r(13),r(4),r(37),r(56),r(27),r(105),{data:function(){return{customerId:"",addCustomer:!1,editCustomer:!1,loading:!0,search:""}},computed:{filteredCustomers:function(){var e=this;return this.search?this.customers.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())})):this.customers},customer:function(){return this.$store.state.customer},customers:function(){return this.$store.state.customers}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("admin"!==e.$auth.user.role){t.next=3;break}return t.next=3,e.loadCustomers();case 3:if("user"!==e.$auth.user.role){t.next=6;break}return t.next=6,e.loadCustomer();case 6:case"end":return t.stop()}}),t)})))()},methods:{customerUpdated:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.close(),"admin"!==t.$auth.user.role){r.next=5;break}return r.next=4,t.loadCustomers();case 4:t.customerSelected(t.customerId);case 5:"user"===t.$auth.user.role&&t.$store.commit("setCustomer",e);case 6:case"end":return r.stop()}}),r)})))()},customerCreated:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.close(),"admin"!==t.$auth.user.role){r.next=6;break}return r.next=4,t.loadCustomers();case 4:t.customerId=e._id,t.customerSelected(e._id);case 6:case"end":return r.stop()}}),r)})))()},loadCustomer:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$get("/v1/customers/"+e.$auth.user.customer);case 3:r=t.sent,e.$store.commit("setCustomer",r),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},loadCustomers:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$axios.$get("/v1/customers/summary");case 3:(r=t.sent)&&e.$store.commit("setCustomers",r),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},customerSelected:function(e){this.customerId=e,e?this.$store.commit("setCustomer",this.customers.find((function(t){return t._id===e}))):this.$store.commit("setCustomer",null)},close:function(){this.addCustomer=!1,this.editCustomer=!1}}}),c=r(62),l=r(63),m=r.n(l),d=r(208),v=r(545),f=r(514),h=r(205),_=r(209),x=r(134),C=r(143),y=r(498),$=r(667),k=r(567),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"py-6",attrs:{fluid:""}},[e.loading?r("div",[r("Loading")],1):r("div",["admin"===e.$auth.user.role&&e.customers?r("div",[e.customer?r("div",[r("v-select",{attrs:{"hide-details":"auto",items:e.customers,label:"Cliente","item-value":"_id","item-text":"name",clearable:"",outlined:""},on:{input:e.customerSelected},scopedSlots:e._u([{key:"append-outer",fn:function(){return[r("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({attrs:{small:"",icon:""}},"v-btn",o,!1),n),[r("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,3448670655)},[e._v(" "),r("v-list",[e.customer?r("v-list-item",{on:{click:function(t){e.editCustomer=!0}}},[r("v-list-item-title",[e._v("Editar")])],1):e._e(),e._v(" "),"admin"===e.$auth.user.role?r("v-list-item",{on:{click:function(t){e.addCustomer=!0}}},[r("v-list-item-title",[e._v("Adicionar cliente")])],1):e._e()],1)],1)]},proxy:!0}],null,!1,1576080828),model:{value:e.customerId,callback:function(t){e.customerId=t},expression:"customerId"}})],1):r("div",[r("h3",{staticClass:"mb-6"},[e._v("Clientes")]),e._v(" "),r("div",{staticClass:"mb-6"},[e.customers.length>5?r("v-text-field",{attrs:{type:"search",clearable:"",outlined:"",label:"Buscar cliente","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),e._v(" "),e._l(e.filteredCustomers,(function(t){return r("v-card",{key:t._id,staticClass:"mb-3 px-3 py-2",attrs:{secondary:""},on:{click:function(r){return e.customerSelected(t._id)}}},[r("div",{staticClass:"d-flex justify-space-between align-center"},[r("h6",{staticClass:"text-h6"},[e._v(e._s(t.name))]),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.editCustomer=!0}}},[r("v-icon",[e._v("mdi-chevron-right")])],1)],1)])}))],2),e._v(" "),r("v-btn",{attrs:{color:"success",large:"",block:""},on:{click:function(t){e.addCustomer=!0}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n          Adicionar cliente\n        ")],1)],1)]):e._e(),e._v(" "),"user"===e.$auth.user.role&&e.customer?r("div",{staticClass:"d-flex justify-space-between align-center"},[r("div",[r("h2",[e._v(e._s(e.customer.name))]),e._v(" "),r("div",[r("small",[e._v(e._s(e.$auth.user.name))])])]),e._v(" "),r("div",[r("v-btn",{attrs:{icon:""},on:{click:function(t){e.editCustomer=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)]):e._e(),e._v(" "),e.addCustomer?r("CustomerForm",{on:{input:e.customerCreated,close:e.close}}):e._e(),e._v(" "),e.editCustomer?r("CustomerForm",{attrs:{customer:e.customer},on:{input:e.customerUpdated,close:e.close}}):e._e()],1)])}),[],!1,null,null,null);t.default=component.exports;m()(component,{Loading:r(531).default,CustomerForm:r(601).default}),m()(component,{VBtn:d.a,VCard:v.a,VContainer:f.a,VIcon:h.a,VList:_.a,VListItem:x.a,VListItemTitle:C.c,VMenu:y.a,VSelect:$.a,VTextField:k.a})}}]);