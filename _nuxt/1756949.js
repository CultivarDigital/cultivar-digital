(window.webpackJsonp=window.webpackJsonp||[]).push([[13,17,22,30],{515:function(e,t,r){"use strict";r.r(t);var n={methods:{close:function(){this.$emit("close")}}},o=r(62),l=r(63),c=r.n(l),m=r(208),d=r(513),v=r(187),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"d-flex align-center justify-space-between"},[n("div",{staticClass:"d-flex align-center"},[n("img",{staticClass:"logo",attrs:{src:r(236)}}),e._v(" "),n("span",{staticClass:"ml-3"},[n("strong",[e._v("Cultivar")]),e._v(" Digital")])]),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-close")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VBtn:m.a,VContainer:d.a,VIcon:v.a})},517:function(e,t,r){"use strict";r.r(t);var n={props:{invalid:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!0},label:{type:String,default:"Salvar"}}},o=r(62),l=r(63),c=r.n(l),m=r(510),d=r(208),v=r(186),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.invalid?r("v-alert",{staticClass:"d-flex justify-center",attrs:{type:"error"}},[e._v("\n    Você deve corrigir os erros acima antes de salvar\n  ")]):e._e(),e._v(" "),r("v-btn",{staticClass:"mb-4 mt-4 font-weight-bold text-none",attrs:{"x-large":"",type:"submit",color:"success",disabled:e.invalid||e.loading,block:e.block,rounded:""}},[e.loading?r("v-progress-circular",{attrs:{color:"secondary",indeterminate:"",size:"20"}}):r("span",[e._v(e._s(e.label))])],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAlert:m.a,VBtn:d.a,VProgressCircular:v.a})},540:function(e,t,r){"use strict";r.r(t);r(32),r(25),r(64);var n={props:{value:{type:Number,default:null},label:{type:String,default:null}},data:function(){return{v:this.value||0}},methods:{updateValue:function(){if(this.v){var e=Number(this.v.replace("R$ ","").replace(/\./g,"").replace(",","."));this.$emit("input",e)}else this.$emit("input",0)}}},o=r(62),l=r(63),c=r.n(l),m=r(536),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",{directives:[{name:"money",rawName:"v-money",value:{decimal:",",thousands:".",precision:2},expression:"{ decimal: ',', thousands: '.', precision: 2 }"}],attrs:{label:e.label,outlined:""},on:{input:e.updateValue},model:{value:e.v,callback:function(t){e.v=t},expression:"v"}})}),[],!1,null,null,null);t.default=component.exports;c()(component,{VTextField:m.a})},549:function(e,t,r){"use strict";r.r(t);r(11),r(13),r(19),r(20);var n=r(17),o=r(3),l=(r(67),r(5),r(15),r(12),r(184),r(144));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var m={components:{ValidationObserver:l.a,ValidationProvider:l.b},props:{customer:{type:Object,default:function(){return null}}},data:function(){return{form:{name:"",corporate_name:"",cnpj:"",address:"",phone:"",email:"",notes:"",point_price:0,point_unit:"hour",points_per_day:0}}},computed:{baseUrl:function(){return"https://cultivardigital.com.br"}},created:function(){var e=this;this.customer&&Object.keys(this.form).forEach((function(t){e.customer[t]&&(e.form[t]=e.customer[t])}))},methods:{save:function(){var e=this,form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.form);this.customer?this.$axios.$patch("/v1/customers/"+this.customer._id,form).then((function(t){e.$notifier.success("Atualizado!"),e.$emit("input",t)})):this.$axios.$post("/v1/customers",form).then((function(t){e.$notifier.success("Salvo!"),e.$emit("input",t)}))},toggleMonth:function(e){this.active_month===e?this.active_month=null:this.active_month=e},removeItem:function(e,t,r){this.form.data[e-1][t-1].splice(r,1)},copy:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,navigator.clipboard.writeText(e);case 2:t.notify("Copiado!");case 3:case"end":return r.stop()}}),r)})))()},close:function(){this.$emit("close")}}},d=m,v=r(62),f=r(63),_=r.n(f),h=r(208),y=r(547),x=r(513),$=r(675),C=r(556),k=r(187),O=r(536),j=r(566),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:!0,fullscreen:"",persistent:""}},[r("v-card",{staticClass:"template-form"},[r("DialogHeader",{on:{close:e.close}}),e._v(" "),r("v-container",{staticClass:"pt-6"},[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.validate,o=t.invalid;return[r("v-form",{on:{submit:function(t){t.preventDefault(),n().then(e.save)}}},[r("validation-provider",{attrs:{name:"Nome da empresa",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{label:"Nome da empresa",outlined:"","error-messages":n},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)}),e._v(" "),r("v-text-field",{attrs:{label:"Razão social",outlined:""},model:{value:e.form.corporate_name,callback:function(t){e.$set(e.form,"corporate_name",t)},expression:"form.corporate_name"}}),e._v(" "),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["##.###.###/####-##"],expression:"['##.###.###/####-##']"}],attrs:{label:"CNPJ",outlined:""},model:{value:e.form.cnpj,callback:function(t){e.$set(e.form,"cnpj",t)},expression:"form.cnpj"}}),e._v(" "),r("v-textarea",{attrs:{rows:"2",label:"Endereço",outlined:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),e._v(" "),r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],attrs:{label:"Telefone de contato",outlined:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e._v(" "),r("v-text-field",{attrs:{label:"Email de contato",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("v-textarea",{attrs:{label:"Observações",outlined:""},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}}),e._v(" "),"admin"===e.$auth.user.role?r("div",[r("v-text-field",{attrs:{label:"Pontos por dia",outlined:""},model:{value:e.form.points_per_day,callback:function(t){e.$set(e.form,"points_per_day",t)},expression:"form.points_per_day"}}),e._v(" "),r("Money",{attrs:{label:"Preço do ponto"},model:{value:e.form.point_price,callback:function(t){e.$set(e.form,"point_price",t)},expression:"form.point_price"}})],1):e._e(),e._v(" "),e.customer?r("v-btn",{staticClass:"mb-6",attrs:{small:""},on:{click:function(){return e.copy(e.baseUrl+"/cadastrar?cliente="+e.customer._id)}}},[r("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-content-copy ")]),e._v("\n            Copiar link de cadastro\n          ")],1):e._e(),e._v(" "),r("div",{staticClass:"text-right"},[r("Save",{attrs:{invalid:o,block:!1,label:"Salvar"}})],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;_()(component,{DialogHeader:r(515).default,Money:r(540).default,Save:r(517).default}),_()(component,{VBtn:h.a,VCard:y.a,VContainer:x.a,VDialog:$.a,VForm:C.a,VIcon:k.a,VTextField:O.a,VTextarea:j.a})},567:function(e,t,r){"use strict";r.r(t);var n=r(17),o=(r(67),{data:function(){return{editCustomer:!1,search:""}},computed:{customer:function(){return this.$store.state.customer},customerSummary:function(){return this.$store.state.customerSummary}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$route.params.cliente,console.log("customerId",r),!r){t.next=7;break}return t.next=5,e.$store.dispatch("loadCustomer",r);case 5:return t.next=7,e.$store.dispatch("loadCustomerSummary");case 7:case"end":return t.stop()}}),t)})))()},methods:{customerUpdated:function(e){this.close(),this.$store.commit("setCustomer",e)},close:function(){this.editCustomer=!1}}}),l=r(62),c=r(63),m=r.n(c),d=r(613),v=r(208),f=r(513),_=r(187),h=r(614),y=r(616),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.customer?r("div",[r("v-container",{staticClass:"d-flex justify-space-between align-center py-6"},[r("div",[r("h3",[e._v(e._s(e.customer.name))]),e._v(" "),r("div",{staticClass:"caption secondary--text text--lighten-4"},[e._v("\n        "+e._s(e.$auth.user.name)+"\n      ")])]),e._v(" "),r("div",[r("v-btn",{attrs:{icon:""},on:{click:function(t){e.editCustomer=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)]),e._v(" "),e.editCustomer?r("CustomerForm",{attrs:{customer:e.customer},on:{input:e.customerUpdated,close:e.close}}):e._e(),e._v(" "),r("div",{staticClass:"px-0 px-md-4 py-0"},[r("v-tabs",{staticClass:"mb-3",attrs:{"show-arrows":!0}},[r("v-tab",{attrs:{to:"/"+e.customer._id+"/demandas"}},[e._v("\n        Demandas\n        "),e.customerSummary&&e.customerSummary.pendingDemands?r("v-badge",{attrs:{color:"accent",small:"",content:e.customerSummary.pendingDemands}}):e._e()],1),e._v(" "),r("v-tab",{attrs:{to:"/"+e.customer._id+"/propostas"}},[e._v("\n        Propostas\n        "),e.customerSummary&&e.customerSummary.pendingProposals?r("v-badge",{attrs:{color:"accent",content:e.customerSummary.pendingProposals}}):e._e()],1),e._v(" "),r("v-tab",{attrs:{to:"/"+e.customer._id+"/faturas"}},[e._v("Faturas")])],1)],1)],1):e._e()}),[],!1,null,null,null);t.default=component.exports;m()(component,{CustomerForm:r(549).default}),m()(component,{VBadge:d.a,VBtn:v.a,VContainer:f.a,VIcon:_.a,VTab:h.a,VTabs:y.a})}}]);