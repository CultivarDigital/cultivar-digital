(window.webpackJsonp=window.webpackJsonp||[]).push([[12,7,11,15,21],{507:function(e,t,n){"use strict";n.r(t);var r={props:{invalid:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!0},label:{type:String,default:"Salvar"}}},o=n(69),l=n(70),c=n.n(l),d=n(502),m=n(207),v=n(208),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.invalid?n("v-alert",{staticClass:"d-flex justify-center",attrs:{type:"error"}},[e._v("\n    Você deve corrigir os erros acima antes de salvar\n  ")]):e._e(),e._v(" "),n("v-btn",{staticClass:"mb-4 mt-4 font-weight-bold text-none",attrs:{"x-large":"",type:"submit",color:"primary",disabled:e.invalid||e.loading,block:e.block,rounded:""}},[e.loading?n("v-progress-circular",{attrs:{color:"secondary",indeterminate:"",size:"20"}}):n("span",[e._v(e._s(e.label))])],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAlert:d.a,VBtn:m.a,VProgressCircular:v.a})},508:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(538),o=n(2),l=Object(o.h)("v-card__actions"),c=Object(o.h)("v-card__subtitle"),d=Object(o.h)("v-card__text"),m=Object(o.h)("v-card__title");r.a},510:function(e,t,n){"use strict";n.r(t);var r={props:{color:{type:String,default:null},message:{type:String,default:null}}},o=n(69),l=n(70),c=n.n(l),d=n(502),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center",on:{click:function(t){return e.$emit("click")}}},[n("v-alert",{attrs:{color:e.color}},[e._v(e._s(e.message))])],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAlert:d.a})},515:function(e,t,n){"use strict";n.r(t);var r=n(69),o=n(70),l=n.n(o),c=n(208),component=Object(r.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-center"},[t("v-progress-circular",{attrs:{indeterminate:""}})],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VProgressCircular:c.a})},527:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));n(105),n(4);var r=[{value:"feature",label:"Funcionalidade",icon:"mdi-star"},{value:"bug",label:"Correção",icon:"mdi-bug"},{value:"improvement",label:"Melhoria",icon:"mdi-wrench"}],o=function(e){return r.find((function(t){return t.value===e}))},l=function(e){var t=o(e);return t?t.icon:""},c=function(e){var t=o(e);return t?t.label:""};t.a=r},528:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n(105),n(4);var r=[{label:"Na fila",value:"backlog"},{label:"Em andamento",value:"in-progress"},{label:"Finalizadas",value:"done"}],o=function(e){var t=r.find((function(t){return t.value===e}));return t?t.label:""};t.a=r},529:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}));n(105),n(4);var r=[{value:0,label:"Urgente",color:"error"},{value:1,label:"Alta",color:"warning"},{value:2,label:"Média",color:"info"},{value:3,label:"Baixa",color:"success"}],o=function(e){return r.find((function(p){return p.value===e}))},l=function(e){var t=o(e);return t?t.label:""},c=function(e){var t=o(e);return t?t.color:""};t.a=r},575:function(e,t,n){"use strict";n.r(t);n(11),n(12),n(18),n(19);var r=n(3),o=n(22),l=(n(71),n(4),n(15),n(13),n(184),n(144)),c=n(527),d=n(528),m=n(529);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var f={components:{ValidationObserver:l.a,ValidationProvider:l.b},props:{demand:{type:Object,default:function(){return null}},company:{type:Object,default:function(){return null}}},data:function(){return{demandTypes:c.a,demandStatus:d.a,demandPriorities:m.a,dialog:!1,companies:[],form:{title:"",company:null,body:null,points:null,price:null,type:null,priority:null,progress:0,status:"backlog",paid:!1}}},created:function(){var e=this;this.demand&&Object.keys(this.form).forEach((function(t){void 0!==e.demand[t]&&null!==e.demand[t]&&(e.form[t]=e.demand[t])})),this.company&&(this.form.company=this.company._id),"admin"===this.$auth.user.role&&this.loadCompanies()},methods:{loadCompanies:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/v1/companies");case 2:e.companies=t.sent;case 3:case"end":return t.stop()}}),t)})))()},save:function(){var e=this,form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.form);this.demand?this.$axios.$patch("/v1/demands/"+this.demand._id,form).then((function(t){e.$notifier.success("Atualizado!"),e.$emit("change",t)})):this.$axios.$post("/v1/demands",form).then((function(t){e.$notifier.success("Salvo!"),e.$emit("change",t)}))},toggleMonth:function(e){this.active_month===e?this.active_month=null:this.active_month=e},removeItem:function(e,t,n){this.form.data[e-1][t-1].splice(n,1)},close:function(){this.$emit("close")}}},_=f,h=n(69),y=n(70),k=n.n(y),x=n(207),D=n(538),O=n(505),C=n(651),w=n(535),$=n(204),j=n(646),S=n(533),V=n(555),P=n(73),component=Object(h.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:!0,fullscreen:""}},[n("v-card",{staticClass:"template-form"},[n("v-toolbar",{attrs:{color:"primary",dark:""}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("span",[e._v(e._s(e.demand?"Editar demanda":"Adicionar demanda"))])],1),e._v(" "),n("v-container",{staticClass:"pt-6"},[n("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.validate,o=t.invalid;return[n("v-form",{on:{submit:function(t){t.preventDefault(),r().then(e.save)}}},[null===e.form.type?n("div",[n("h3",{staticClass:"mb-6"},[e._v("Que tipo de demanda é essa?")]),e._v(" "),e._l(e.demandTypes,(function(t){return n("v-btn",{key:t.value,staticClass:"mb-6 text-left",attrs:{color:"primary",large:"",block:""},on:{click:function(n){e.form.type=t.value}}},[n("v-icon",{attrs:{left:""}},[e._v(" "+e._s(t.icon))]),e._v("\n              "+e._s(t.label)+"\n            ")],1)}))],2):null===e.form.priority?n("div",[n("h3",{staticClass:"mb-6"},[e._v("Qual a prioridade dessa demanda?")]),e._v(" "),e._l(e.demandPriorities,(function(t){return n("v-btn",{key:t.value,staticClass:"mb-6 text-left",attrs:{color:t.color,large:"",block:""},on:{click:function(n){e.form.priority=t.value}}},[e._v("\n              "+e._s(t.label)+"\n            ")])}))],2):n("div",["admin"===e.$auth.user.role&&e.companies?n("validation-provider",{attrs:{name:"Cliente",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-select",{attrs:{label:"Cliente",items:e.companies,"item-value":"_id","item-text":"name",outlined:"","error-messages":r},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})]}}],null,!0)}):e._e(),e._v(" "),n("validation-provider",{attrs:{name:"Título da demanda",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-textarea",{attrs:{rows:"1","auto-grow":"",label:"Título da demanda",outlined:"","error-messages":r,focusable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})]}}],null,!0)}),e._v(" "),n("Editor",{attrs:{editable:""},model:{value:e.form.body,callback:function(t){e.$set(e.form,"body",t)},expression:"form.body"}}),e._v(" "),n("validation-provider",{attrs:{name:"Tipo de demanda",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-select",{attrs:{label:"Tipo de demanda",items:e.demandTypes,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})]}}],null,!0)}),e._v(" "),n("validation-provider",{attrs:{name:"Prioridade",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-select",{attrs:{label:"Prioridade",items:e.demandPriorities,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})]}}],null,!0)}),e._v(" "),n("validation-provider",{attrs:{name:"Pontos",rules:"required|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return["admin"===e.$auth.user.role?n("v-text-field",{attrs:{label:"Pontos",type:"number",outlined:"","error-messages":r},model:{value:e.form.points,callback:function(t){e.$set(e.form,"points",t)},expression:"form.points"}}):e._e()]}}],null,!0)}),e._v(" "),n("div",{staticClass:"text-right"},[n("Save",{attrs:{invalid:o,block:!1,label:"Salvar"}})],1)],1)])]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;k()(component,{Editor:n(532).default,Save:n(507).default}),k()(component,{VBtn:x.a,VCard:D.a,VContainer:O.a,VDialog:C.a,VForm:w.a,VIcon:$.a,VSelect:j.a,VTextField:S.a,VTextarea:V.a,VToolbar:P.a})},602:function(e,t,n){"use strict";n.r(t);var r=n(22),o=(n(71),n(105),n(4),n(527)),l=n(528),c=n(529),d={props:{company:{type:Object,default:null}},data:function(){return{demandTypes:o.a,demandTypeLabel:o.c,demandTypeIcon:o.b,demandPriorityLabel:c.c,demandPriorityColor:c.b,demandStatus:l.a,demandStatusLabel:l.b,demandPriorities:c.a,demands:null,addDemand:!1,activeDemand:null,editDemand:null,showStatus:l.a[0],filters:{company:this.company?this.company._id:null}}},computed:{hasDemand:function(){var e=this;return this.demands.find((function(t){return e.showStatus.value===t.status}))}},watch:{company:function(){this.filters.company=this.company?this.company._id:null,this.loadDemands()}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadDemands();case 2:case"end":return t.stop()}}),t)})))()},methods:{isActive:function(e){return this.activeDemand===e._id},toggleDemand:function(e){this.activeDemand===e?this.activeDemand=null:this.activeDemand=e},loadDemands:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.demands=null,t.next=3,e.$axios.$get("/v1/demands",{params:e.filters});case 3:e.demands=t.sent,e.$emit("change");case 5:case"end":return t.stop()}}),t)})))()},updateStatus:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$axios.$patch("/v1/demands/".concat(e._id),{status:t});case 2:n.loadDemands();case 3:case"end":return r.stop()}}),r)})))()}}},m=n(69),v=n(70),f=n.n(v),_=n(207),h=n(538),y=n(508),k=n(531),x=n(526),D=n(204),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"success"},on:{click:function(t){e.addDemand=!0}}},[n("v-icon",[e._v("mdi-plus")])],1),e._v(" "),n("div",{staticClass:"d-flex justify-space-around"},e._l(e.demandStatus,(function(t){return n("v-btn",{key:t.value,attrs:{small:"",color:e.showStatus.value===t.value?"primary":"secondary"},on:{click:function(n){e.showStatus=t}}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),1),e._v(" "),n("div",{staticClass:"pt-6"},[n("div",[e.demands?n("div",[e.hasDemand?e._e():n("div",[n("Alert",{attrs:{message:"Nenhuma demanda aqui"}})],1),e._v(" "),e._l(e.demands,(function(t){return[t.status===e.showStatus.value?n("v-card",{key:t._id,staticClass:"mb-3"},[n("v-card-text",[n("div",{staticClass:"d-flex align-center justify-space-between mb-3"},[n("div",[n("h3",{staticClass:"white--text"},[e._v(e._s(t.title))])]),e._v(" "),n("div",{staticClass:"text-right"},[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.toggleDemand(t._id)}}},[n("v-icon",[e._v(e._s(e.isActive(t)?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)]),e._v(" "),e.isActive(t)?n("div",{staticClass:"white--text"},[n("Editor",{model:{value:t.body,callback:function(n){e.$set(t,"body",n)},expression:"demand.body"}})],1):e._e(),e._v(" "),n("div",[t.points&&t.points>0?n("div",{staticClass:"mb-3"},[n("strong",[e._v("\n                    "+e._s(t.estimate_in_days)+"\n                    dias\n                    "),n("br"),e._v("\n                    "+e._s(e._f("moeda")(t.price))+"\n                  ")])]):e._e(),e._v(" "),t.type?n("v-chip",{attrs:{outlined:"",small:"",color:"rgba(255, 255, 255, 0.6)"}},[n("v-icon",{attrs:{left:"",small:"",color:e.demandPriorityColor(t.priority)}},[e._v(e._s(e.demandTypeIcon(t.type)))]),e._v("\n                  "+e._s(e.demandTypeLabel(t.type))+"\n                ")],1):e._e(),e._v(" "),t.approved&&"backlog"===t.status?n("v-chip",{attrs:{outlined:"",small:"",color:"success"}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-check ")]),e._v("\n                  Aprovada\n                ")],1):e._e(),e._v(" "),t.points||"backlog"!==t.status?e._e():n("v-chip",{attrs:{outlined:"",small:"",color:"rgba(255, 255, 255, 0.6)"}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-clock ")]),e._v("\n                  Aguardando estimativa\n                ")],1)],1),e._v(" "),e.isActive(t)?n("div",{staticClass:"text-right"},[n("v-divider",{staticClass:"my-3"}),e._v(" "),e.isActive(t)?n("v-btn",{attrs:{small:""},on:{click:function(t){e.activeDemand=null}}},[n("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-close")]),e._v(" Fechar\n                ")],1):e._e(),e._v(" "),e.isActive(t)?n("v-btn",{attrs:{small:""},on:{click:function(n){e.editDemand=t}}},[n("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-pencil")]),e._v(" Editar\n                ")],1):e._e(),e._v(" "),"admin"===e.$auth.user.role&&"backlog"===t.status?n("v-btn",{attrs:{color:"success",small:""},on:{click:function(n){return e.updateStatus(t,"in-progress")}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-play-circle-outline")]),e._v(" Iniciar\n                ")],1):e._e(),e._v(" "),"admin"===e.$auth.user.role&&"in-progress"===t.status?n("v-btn",{attrs:{color:"success",small:""},on:{click:function(n){return e.updateStatus(t,"done")}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-check-circle-outline")]),e._v(" Concluir\n                ")],1):e._e()],1):e._e()])],1):e._e()]}))],2):n("Loading")],1)]),e._v(" "),e.addDemand?n("DemandForm",{attrs:{company:e.company},on:{change:function(t){e.loadDemands(),e.addDemand=!1},close:function(t){e.addDemand=!1}}}):e._e(),e._v(" "),e.editDemand?n("DemandForm",{attrs:{company:e.company,demand:e.editDemand},on:{change:function(t){e.loadDemands(),e.editDemand=null},close:function(t){e.editDemand=null}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{Alert:n(510).default,Editor:n(532).default,Loading:n(515).default,DemandForm:n(575).default}),f()(component,{VBtn:_.a,VCard:h.a,VCardText:y.a,VChip:k.a,VDivider:x.a,VIcon:D.a})}}]);