(window.webpackJsonp=window.webpackJsonp||[]).push([[26,7,14],{602:function(t,e,n){"use strict";n.r(e);var r=n(592),d={props:{color:{type:String,default:"secondary"},message:{type:String,default:null}}},o=n(31),component=Object(o.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center",on:{click:function(e){return t.$emit("click")}}},[e(r.a,{attrs:{color:t.color}},[t._v(t._s(t.message))])],1)}),[],!1,null,null,null);e.default=component.exports},603:function(t,e,n){"use strict";n.r(e);var r=n(238),d=n(31),component=Object(d.a)({},(function(){var t=this._self._c;return t("div",{staticClass:"text-center"},[t(r.a,{attrs:{indeterminate:""}})],1)}),[],!1,null,null,null);e.default=component.exports},696:function(t,e,n){"use strict";n.r(e);var r=n(242),d=n(572),o=n(611),c=n(598),l=n(154),m=(n(8),n(7),n(10),n(13),n(11),n(14),n(1)),f=n(22),v=(n(63),n(85),n(4),n(216),n(166),n(615)),h=n(616),_=n(617);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(m.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={layout:"customer",data:function(){return{demandTypes:v.a,demandTypeLabel:v.c,demandTypeIcon:v.b,demandPriorityLabel:_.c,demandPriorityColor:_.b,demandStatus:h.a,demandStatusLabel:h.b,demandPriorities:_.a,demands:null,addDemand:!1,activeDemand:null,showStatus:h.a[0],filters:{}}},computed:{hasDemandsInProgress:function(){return this.demands.find((function(t){return"in-progress"===t.status}))},hasPendingDemands:function(){return this.demands.find((function(t){return"backlog"===t.status&&!t.estimated}))},hasDemand:function(){var t=this;return this.demands.find((function(e){return t.showStatus.value===e.status}))},customer:function(){return this.$store.state.customer},demand:function(){var t=this;return this.$route.query.demanda&&this.demands?this.demands.find((function(e){return e._id===t.$route.query.demanda})):null}},mounted:function(){this.loadDemands()},methods:{isActive:function(t){return this.activeDemand&&this.activeDemand._id===t._id},loadDemands:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.demands=null,n=D(D({},t.filters),{},{customer:t.customer._id}),e.next=4,t.$axios.$get("/v1/demands",{params:n});case 4:t.demands=e.sent,t.hasDemandsInProgress&&!t.hasPendingDemands&&(t.showStatus=h.a[1]);case 6:case"end":return e.stop()}}),e)})))()},openDemand:function(t){this.$router.push("/"+this.customer._id+"/demandas?demanda="+t._id)},demandCreated:function(){this.addDemand=!1,this.loadDemands(),this.loadSummary()},demandUpdated:function(t){var e=this.demands.findIndex((function(e){return e._id===t._id}));this.demands.splice(e,1,t),this.loadSummary()},removeDemand:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$delete("/v1/demands/".concat(t.activeDemand._id));case 2:t.closeDemand(),t.loadDemands(),t.loadSummary();case 5:case"end":return e.stop()}}),e)})))()},closeDemand:function(){this.$router.push("/"+this.customer._id+"/demandas")},loadSummary:function(){this.$store.dispatch("loadCustomerSummary")}}},O=n(31),component=Object(O.a)(w,(function(){var t=this,e=t._self._c;return e("div",[t.customer?e(c.a,[e(r.a,{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"success"},on:{click:function(e){t.addDemand=!0}}},[e(l.a,[t._v("mdi-plus")])],1),t._v(" "),e("div",{staticClass:"d-flex justify-space-around"},t._l(t.demandStatus,(function(n){return e(r.a,{key:n.value,staticStyle:{"min-width":"32%",padding:"24px 8px"},attrs:{"x-small":"",color:t.showStatus.value===n.value?"primary":"secondary lighten-1"},on:{click:function(e){t.showStatus=n}}},[t._v("\n        "+t._s(n.label)+"\n      ")])})),1),t._v(" "),e("div",{staticClass:"pt-6"},[e("div",[t.demands?e("div",[t.hasDemand?t._e():e("div",[e("Alert",{attrs:{message:"Nenhuma demanda aqui"}})],1),t._v(" "),t._l(t.demands,(function(n){return[n.status===t.showStatus.value?e(d.a,{key:n._id,staticClass:"mb-3 pa-3",on:{click:function(e){return t.openDemand(n)}}},[e("h4",{staticClass:"mb-2"},[t._v(t._s(n.title))]),t._v(" "),e("div",[e("div",{staticClass:"mb-3"},[e("DemandEstimate",{attrs:{demand:n}})],1),t._v(" "),e("div",{staticClass:"d-flex justify-space-between align-start"},[e("div",[n.type?e(o.a,{staticClass:"secondary--text text--lighten-4",attrs:{outlined:"",small:""}},[t._v("\n                      "+t._s(t.demandTypeLabel(n.type))+"\n                    ")]):t._e(),t._v(" "),n.approved&&"backlog"===n.status?e(o.a,{attrs:{outlined:"",small:"",color:"success"}},[e(l.a,{attrs:{left:"",small:""}},[t._v(" mdi-low ")]),t._v("\n                      Aprovada\n                    ")],1):t._e()],1),t._v(" "),n.priority?e(o.a,{staticClass:"justify-center",staticStyle:{"min-width":"60px"},attrs:{outlined:"",small:"",color:t.demandPriorityColor(n.priority)}},[t._v("\n                    "+t._s(t.demandPriorityLabel(n.priority))+"\n                  ")]):t._e()],1)])]):t._e()]}))],2):e("Loading")],1)]),t._v(" "),t.addDemand?e("DemandForm",{on:{input:t.demandCreated,close:function(e){t.addDemand=!1}}}):t._e(),t._v(" "),t.demand?e("Demand",{attrs:{demand:t.demand},on:{input:t.demandUpdated,close:t.closeDemand,remove:t.removeDemand}}):t._e()],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Alert:n(602).default,DemandEstimate:n(658).default,Loading:n(603).default,DemandForm:n(659).default,Demand:n(669).default})}}]);