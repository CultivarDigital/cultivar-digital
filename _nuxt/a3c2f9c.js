(window.webpackJsonp=window.webpackJsonp||[]).push([[11,12,23],{505:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return v}));var r=n(519),o=n(2),l=Object(o.h)("v-card__actions"),c=Object(o.h)("v-card__subtitle"),d=Object(o.h)("v-card__text"),v=Object(o.h)("v-card__title");r.a},506:function(t,e,n){"use strict";n.r(e);var r={methods:{close:function(){this.$emit("close")}}},o=n(69),l=n(70),c=n.n(l),d=n(206),v=n(504),m=n(532),f=n(203),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",{staticClass:"d-flex align-center justify-space-between"},[r("div",{staticClass:"d-flex align-center"},[r("img",{staticClass:"logo",attrs:{src:n(230)}}),t._v(" "),r("span",{staticClass:"ml-3"},[r("strong",[t._v("Cultivar")]),t._v(" Digital")])]),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:t.close}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-divider")],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VContainer:v.a,VDivider:m.a,VIcon:f.a})},508:function(t,e,n){"use strict";n.r(e);var r={props:{invalid:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!0},label:{type:String,default:"Salvar"}}},o=n(69),l=n(70),c=n.n(l),d=n(501),v=n(206),m=n(207),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.invalid?n("v-alert",{staticClass:"d-flex justify-center",attrs:{type:"error"}},[t._v("\n    Você deve corrigir os erros acima antes de salvar\n  ")]):t._e(),t._v(" "),n("v-btn",{staticClass:"mb-4 mt-4 font-weight-bold text-none",attrs:{"x-large":"",type:"submit",color:"primary",disabled:t.invalid||t.loading,block:t.block,rounded:""}},[t.loading?n("v-progress-circular",{attrs:{color:"secondary",indeterminate:"",size:"20"}}):n("span",[t._v(t._s(t.label))])],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VAlert:d.a,VBtn:v.a,VProgressCircular:m.a})},511:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c}));n(104),n(4);var r=[{value:"feature",label:"Funcionalidade",icon:"mdi-star"},{value:"bug",label:"Correção",icon:"mdi-bug"},{value:"improvement",label:"Melhoria",icon:"mdi-wrench"}],o=function(t){return r.find((function(e){return e.value===t}))},l=function(t){var e=o(t);return e?e.icon:""},c=function(t){var e=o(t);return e?e.label:""};e.a=r},512:function(t,e,n){"use strict";n.d(e,"b",(function(){return o}));n(104),n(4);var r=[{label:"Na fila",value:"backlog"},{label:"Em andamento",value:"in-progress"},{label:"Finalizadas",value:"done"}],o=function(t){var e=r.find((function(e){return e.value===t}));return e?e.label:""};e.a=r},513:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c}));n(104),n(4);var r=[{value:0,label:"Urgente",color:"error"},{value:1,label:"Alta",color:"warning"},{value:2,label:"Média",color:"info"},{value:3,label:"Baixa",color:"success"}],o=function(t){return r.find((function(p){return p.value===t}))},l=function(t){var e=o(t);return e?e.label:""},c=function(t){var e=o(t);return e?e.color:""};e.a=r},520:function(t,e,n){"use strict";n.r(e);n(11),n(12),n(18),n(19);var r=n(3),o=(n(4),n(15),n(13),n(183),n(143)),l=n(511),c=n(512),d=n(513);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={components:{ValidationObserver:o.a,ValidationProvider:o.b},props:{demand:{type:Object,default:function(){return null}}},data:function(){return{demandTypes:l.a,demandStatus:c.a,demandPriorities:d.a,dialog:!1,form:{title:"",body:null,points:null,price:null,type:null,priority:null,progress:0,status:"backlog",paid:!1}}},computed:{company:function(){return this.$store.state.company},estimate:function(){return this.form.points&&this.company?{estimate_in_days:Math.round(this.form.points/this.company.points_per_day),price:this.form.points*this.company.point_price}:null}},created:function(){var t=this;this.demand&&Object.keys(this.form).forEach((function(e){void 0!==t.demand[e]&&null!==t.demand[e]&&(t.form[e]=t.demand[e])}))},methods:{save:function(){var t=this,form=m({},this.form);this.demand?this.$axios.$patch("/v1/demands/"+this.demand._id,form).then((function(e){t.$notifier.success("Atualizado!"),t.$emit("input",e)})):this.$axios.$post("/v1/demands",m(m({},form),{},{company:this.company._id})).then((function(e){t.$notifier.success("Salvo!"),t.$emit("input",e)}))},toggleMonth:function(t){this.active_month===t?this.active_month=null:this.active_month=t},removeItem:function(t,e,n){this.form.data[t-1][e-1].splice(n,1)},close:function(){this.$emit("close")}}},_=n(69),h=n(70),y=n.n(h),k=n(206),x=n(519),C=n(504),V=n(651),$=n(553),O=n(203),S=n(646),j=n(551),w=n(580),component=Object(_.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:!0,fullscreen:"",persistent:""}},[n("v-card",{staticClass:"template-form"},[n("DialogHeader",{on:{close:t.close}}),t._v(" "),n("v-container",{staticClass:"pt-6"},[n("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.validate,o=e.invalid;return[n("v-form",{on:{submit:function(e){e.preventDefault(),r().then(t.save)}}},[null===t.form.type?n("div",[n("h3",{staticClass:"mb-6"},[t._v("Que tipo de demanda é essa?")]),t._v(" "),t._l(t.demandTypes,(function(e){return n("v-btn",{key:e.value,staticClass:"mb-6 text-left",attrs:{color:"primary",large:"",block:""},on:{click:function(n){t.form.type=e.value}}},[n("v-icon",{attrs:{left:""}},[t._v(" "+t._s(e.icon))]),t._v("\n              "+t._s(e.label)+"\n            ")],1)}))],2):null===t.form.priority?n("div",[n("h3",{staticClass:"mb-6"},[t._v("Qual a prioridade dessa demanda?")]),t._v(" "),t._l(t.demandPriorities,(function(e){return n("v-btn",{key:e.value,staticClass:"mb-6 text-left",attrs:{color:e.color,large:"",block:""},on:{click:function(n){t.form.priority=e.value}}},[t._v("\n              "+t._s(e.label)+"\n            ")])}))],2):n("div",[n("validation-provider",{attrs:{name:"Título da demanda",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("v-textarea",{attrs:{rows:"1","auto-grow":"",label:"Título da demanda",outlined:"","error-messages":r,focusable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})]}}],null,!0)}),t._v(" "),n("Editor",{attrs:{editable:""},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}}),t._v(" "),n("validation-provider",{attrs:{name:"Tipo de demanda",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("v-select",{attrs:{label:"Tipo de demanda",items:t.demandTypes,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})]}}],null,!0)}),t._v(" "),n("validation-provider",{attrs:{name:"Prioridade",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("v-select",{attrs:{label:"Prioridade",items:t.demandPriorities,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}})]}}],null,!0)}),t._v(" "),"admin"===t.$auth.user.role?n("validation-provider",{attrs:{name:"Status da demanda",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("v-select",{attrs:{label:"Status da demanda",items:t.demandStatus,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})]}}],null,!0)}):t._e(),t._v(" "),"admin"===t.$auth.user.role?n("validation-provider",{attrs:{name:"Pontos",rules:"required|min_value:0"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("v-text-field",{attrs:{label:"Pontos",type:"number",outlined:"","error-messages":r},model:{value:t.form.points,callback:function(e){t.$set(t.form,"points",e)},expression:"form.points"}}),t._v(" "),"admin"===t.$auth.user.role&&t.estimate?n("div",[t._v("\n                "+t._s(t._f("moeda")(t.estimate.price))+" ("+t._s(t.estimate.estimate_in_days)+" dias)\n              ")]):t._e()]}}],null,!0)}):t._e(),t._v(" "),n("div",{staticClass:"text-right"},[n("Save",{attrs:{invalid:o,block:!1,label:"Salvar"}})],1)],1)])]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{DialogHeader:n(506).default,Editor:n(521).default,Save:n(508).default}),y()(component,{VBtn:k.a,VCard:x.a,VContainer:C.a,VDialog:V.a,VForm:$.a,VIcon:O.a,VSelect:S.a,VTextField:j.a,VTextarea:w.a})},523:function(t,e,n){"use strict";n.r(e);var r={props:{button:{type:Boolean,default:!1},label:{type:String,default:"Tem certeza disso?"},hint:{type:String,default:"Esta alteração não pode ser desfeita"},icon:{type:String,default:"mdi-delete"},buttonLabel:{type:String,default:"Remover"}},data:function(){return{dialog:!1}},methods:{confirm:function(){this.dialog=!1,this.$emit("confirm")},cancel:function(){this.dialog=!1,this.$emit("cancel")}}},o=n(69),l=n(70),c=n.n(l),d=n(206),v=n(519),m=n(505),f=n(651),_=n(203),h=n(500),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"290"},on:{"click:outside":function(e){t.removeComment=null}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[t.button?n("v-btn",t._g(t._b({attrs:{small:"",dark:""}},"v-btn",o,!1),r),[n("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon))]),t._v(" "+t._s(t.buttonLabel)+"\n    ")],1):n("v-btn",t._g(t._b({attrs:{icon:"","x-small":""}},"v-btn",o,!1),r),[n("v-icon",{attrs:{dark:""}},[t._v(t._s(t.icon))])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v("\n      "+t._s(t.label)+"\n    ")]),t._v(" "),n("v-card-text",[t._v(" "+t._s(t.hint)+" ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"error",text:""},on:{click:t.cancel}},[t._v(" Não ")]),t._v(" "),n("v-btn",{attrs:{color:"green",text:""},on:{click:t.confirm}},[t._v(" Sim ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VDialog:f.a,VIcon:_.a,VSpacer:h.a})},526:function(t,e,n){"use strict";n.r(e);var r=n(22),o=(n(71),n(511)),l=n(512),c=n(513),d={props:{demand:{type:Object,required:!0},preview:{type:Boolean,default:!1}},data:function(){return{demandTypes:o.a,demandTypeLabel:o.c,demandTypeIcon:o.b,demandPriorityLabel:c.c,demandPriorityColor:c.b,demandStatus:l.a,demandStatusLabel:l.b,demandPriorities:c.a,edit:!1}},created:function(){},methods:{close:function(){this.$emit("close")},changed:function(t){this.edit=!1,this.$emit("input",t)},remove:function(t){this.$emit("remove",t)},updateStatus:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$axios.$patch("/v1/demands/".concat(t._id),{status:e});case 2:o=r.sent,n.changed(o);case 4:case"end":return r.stop()}}),r)})))()}}},v=n(69),m=n(70),f=n.n(m),_=n(206),h=n(519),y=n(568),k=n(504),x=n(651),C=n(532),V=n(203),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:!0,fullscreen:"",persistent:""}},[n("v-card",{staticClass:"template-form"},[n("DialogHeader",{on:{close:t.close}}),t._v(" "),n("v-container",{staticClass:"pt-6"},[n("div",{staticClass:"d-flex justify-space-between align-center mb-6"},[n("div",[t._v("\n          Demanda\n          "),t.demand.status?n("span",[t._v("\n            "+t._s(t.demandStatusLabel(t.demand.status).toLowerCase())+"\n          ")]):t._e()]),t._v(" "),t.demand.type?n("v-chip",{attrs:{outlined:"",small:"",color:"rgba(255, 255, 255, 0.6)"}},[n("v-icon",{attrs:{left:"",small:"",color:t.demandPriorityColor(t.demand.priority)}},[t._v(t._s(t.demandTypeIcon(t.demand.type)))]),t._v("\n          "+t._s(t.demandTypeLabel(t.demand.type))+"\n        ")],1):t._e()],1),t._v(" "),n("h3",{staticClass:"white--text mb-3"},[t._v(t._s(t.demand.title))]),t._v(" "),n("div",{staticClass:"white--text mb-3"},[n("Editor",{attrs:{value:t.demand.body}})],1),t._v(" "),n("div",[t.demand.points&&t.demand.points>0?n("div",{staticClass:"mb-6"},[n("small",[t._v("\n            "+t._s(t.demand.estimate_in_days)+"\n            dias\n            "),n("br"),t._v("\n            "+t._s(t._f("moeda")(t.demand.price))+"\n          ")])]):t._e()]),t._v(" "),t.demand.approved&&"backlog"===t.demand.status?n("v-chip",{attrs:{outlined:"",small:"",color:"success"}},[n("v-icon",{attrs:{left:"",small:""}},[t._v(" mdi-check ")]),t._v("\n        Aprovada\n      ")],1):t._e(),t._v(" "),t.demand.points||"backlog"!==t.demand.status||"feature"!==t.demand.type?t._e():n("v-chip",{attrs:{outlined:"",small:"",color:"rgba(255, 255, 255, 0.6)"}},[n("v-icon",{attrs:{left:"",small:""}},[t._v(" mdi-clock ")]),t._v("\n        Aguardando estimativa\n      ")],1),t._v(" "),t.preview?t._e():n("div",{staticClass:"text-right"},[n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"d-flex justify-space-between align-center"},["admin"===t.$auth.user.role?n("div",[n("Remove",{attrs:{button:"","button-label":"Arquivar"},on:{confirm:t.remove}})],1):t._e(),t._v(" "),n("div",[n("v-btn",{attrs:{small:""},on:{click:function(e){t.edit=!0}}},[n("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-pencil")]),t._v(" Editar\n            ")],1),t._v(" "),"admin"===t.$auth.user.role&&"backlog"===t.demand.status?n("v-btn",{attrs:{color:"success",small:""},on:{click:function(e){return t.updateStatus(t.demand,"in-progress")}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-play-circle-outline")]),t._v(" Iniciar\n            ")],1):t._e(),t._v(" "),"admin"===t.$auth.user.role&&"in-progress"===t.demand.status?n("v-btn",{attrs:{color:"success",small:""},on:{click:function(e){return t.updateStatus(t.demand,"done")}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-check-circle-outline")]),t._v(" Concluir\n            ")],1):t._e()],1)])],1)],1),t._v(" "),t.edit?n("DemandForm",{attrs:{demand:t.demand},on:{input:t.changed,close:function(e){t.edit=!1}}}):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{DialogHeader:n(506).default,Editor:n(521).default,Remove:n(523).default,DemandForm:n(520).default}),f()(component,{VBtn:_.a,VCard:h.a,VChip:y.a,VContainer:k.a,VDialog:x.a,VDivider:C.a,VIcon:V.a})}}]);