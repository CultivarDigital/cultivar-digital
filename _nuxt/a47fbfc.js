(window.webpackJsonp=window.webpackJsonp||[]).push([[12,13],{605:function(e,t,n){"use strict";n.r(t);var r={props:{item:{type:Object,default:null}}},o=n(31),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",[e.item.estimate_in_days>0?t("div",{staticClass:"caption secondary--text text--lighten-4"},[e.item.billable?t("div",[e._v("\n      "+e._s(e._f("moeda")(e.item.price))+" ("+e._s(e.$utils.plural(e.item.estimate_in_days,"dia"))+")\n    ")]):t("div",[e._v("\n      "+e._s(e.$utils.plural(e.item.estimate_in_days,"dia"))+"\n    ")])]):t("div",{staticClass:"caption secondary--text text--lighten-4 opaque"},[e._v("\n    Não será estimada\n  ")])])}),[],!1,null,null,null);t.default=component.exports},614:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));n(85),n(4);var r=[{value:"feature",label:"Funcionalidade",icon:"mdi-star"},{value:"bug",label:"Correção",icon:"mdi-bug"},{value:"improvement",label:"Melhoria",icon:"mdi-wrench"}],o=function(e){return r.find((function(t){return t.value===e}))},l=function(e){var t=o(e);return t?t.icon:""},c=function(e){var t=o(e);return t?t.label:""};t.a=r},615:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));n(85),n(4);var r=[{label:"Na fila",value:"backlog"},{label:"Em andamento",value:"in-progress"},{label:"Finalizadas",value:"done"}],o=function(e){var t=r.find((function(t){return t.value===e}));return t?t.label:""};t.a=r},616:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}));n(85),n(4);var r=[{value:1,label:"Alta",color:"error"},{value:2,label:"Média",color:"warning"},{value:3,label:"Baixa",color:"info"}],o=function(e){return r.find((function(p){return p.value===e}))},l=function(e){var t=o(e);return t?t.label:""},c=function(e){var t=o(e);return t?t.color:""};t.a=r},635:function(e,t,n){"use strict";n.r(t);var r=n(242),o=n(572),l=n(568),c=n(597),d=n(154),m=n(588),f={props:{button:{type:Boolean,default:!1},label:{type:String,default:"Tem certeza disso?"},hint:{type:String,default:"Esta alteração não pode ser desfeita"},icon:{type:String,default:"mdi-delete"},buttonLabel:{type:String,default:"Remover"}},data:function(){return{dialog:!1}},methods:{confirm:function(){this.dialog=!1,this.$emit("confirm")},cancel:function(){this.dialog=!1,this.$emit("cancel")}}},v=n(31),component=Object(v.a)(f,(function(){var e=this,t=e._self._c;return t(c.a,{attrs:{"max-width":"290"},on:{"click:outside":function(t){e.removeComment=null}},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e.button?t(r.a,e._g(e._b({attrs:{small:""}},"v-btn",l,!1),o),[t(d.a,{attrs:{left:""}},[e._v(e._s(e.icon))]),e._v(" "+e._s(e.buttonLabel)+"\n    ")],1):t(r.a,e._g(e._b({attrs:{icon:"",small:""}},"v-btn",l,!1),o),[t(d.a,[e._v(e._s(e.icon))])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),t(o.a,[t(l.c,{staticClass:"text-h5"},[e._v("\n      "+e._s(e.label)+"\n    ")]),e._v(" "),t(l.b,[e._v(" "+e._s(e.hint)+" ")]),e._v(" "),t(l.a,{staticClass:"pa-3"},[t(m.a),e._v(" "),t(r.a,{attrs:{color:"error",large:""},on:{click:e.cancel}},[e._v(" Não ")]),e._v(" "),t(r.a,{attrs:{color:"success",large:""},on:{click:e.confirm}},[e._v(" Sim ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},656:function(e,t,n){"use strict";n.r(t);var r=n(242),o=n(572),l=n(598),c=n(597),d=n(590),m=n(154),f=n(694),v=n(692),_=n(161),h=n(591),y=(n(7),n(10),n(13),n(14),n(1)),k=(n(4),n(11),n(8),n(166),n(108)),$=n(614),x=n(615),O=n(616);function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(y.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={components:{ValidationObserver:k.a,ValidationProvider:k.b},props:{demand:{type:Object,default:function(){return null}}},data:function(){return{demandTypes:$.a,demandStatus:x.a,demandPriorities:O.a,dialog:!1,form:{title:"",body:null,points:0,price:null,type:null,priority:null,progress:0,status:"backlog",paid:!1,billable:null,estimated:null}}},computed:{customer:function(){return this.$store.state.customer},estimate:function(){return this.form.points&&this.customer?{estimate_in_days:Math.round(this.form.points/this.customer.points_per_day),price:this.form.points*this.customer.point_price,billable:this.form.billable}:null}},created:function(){var e=this;this.demand&&Object.keys(this.form).forEach((function(t){void 0!==e.demand[t]&&null!==e.demand[t]&&(e.form[t]=e.demand[t])}))},methods:{save:function(){var e=this,form=j({},this.form);this.demand?this.$axios.$patch("/v1/demands/"+this.demand._id,form).then((function(t){e.$notifier.success("Atualizado!"),e.$emit("input",t)})):this.$axios.$post("/v1/demands",j(j({},form),{},{customer:this.customer._id})).then((function(t){e.$notifier.success("Salvo!"),e.$emit("input",t)}))},toggleMonth:function(e){this.active_month===e?this.active_month=null:this.active_month=e},removeItem:function(e,t,n){this.form.data[e-1][t-1].splice(n,1)},pointsChanged:function(){this.setEstimated(),this.setBillable()},setEstimated:function(){this.form.estimated=this.form.points>0},setBillable:function(){null===this.form.billable&&(this.form.billable=this.form.points>0)},close:function(){this.$emit("close")},remove:function(e){this.$emit("remove",e)}}},C=n(31),component=Object(C.a)(w,(function(){var e=this,t=e._self._c;return t(c.a,{attrs:{value:!0,fullscreen:"",persistent:""}},[t(o.a,{staticClass:"template-form",attrs:{color:"secondary"}},[t("DialogHeader",{on:{close:e.close}}),e._v(" "),t(l.a,{staticClass:"pt-6"},[t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(n){var o=n.validate,l=n.invalid;return[t(d.a,{on:{submit:function(t){t.preventDefault(),o().then(e.save)}}},[null===e.form.type?t("div",[t("h3",{staticClass:"mb-6"},[e._v("Que tipo de demanda é essa?")]),e._v(" "),e._l(e.demandTypes,(function(n){return t(r.a,{key:n.value,staticClass:"mb-6 text-left",attrs:{color:"primary",large:"",block:""},on:{click:function(t){e.form.type=n.value}}},[t(m.a,{attrs:{left:""}},[e._v(" "+e._s(n.icon))]),e._v("\n              "+e._s(n.label)+"\n            ")],1)}))],2):null===e.form.priority?t("div",[t("h3",{staticClass:"mb-6"},[e._v("Qual a prioridade dessa demanda?")]),e._v(" "),e._l(e.demandPriorities,(function(n){return t(r.a,{key:n.value,staticClass:"mb-6 text-left",attrs:{color:n.color,large:"",block:""},on:{click:function(t){e.form.priority=n.value}}},[e._v("\n              "+e._s(n.label)+"\n            ")])}))],2):t("div",[t("validation-provider",{attrs:{name:"Título da demanda",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.errors;return[t(h.a,{attrs:{rows:"1","auto-grow":"",label:"Título da demanda",outlined:"","error-messages":r,focusable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})]}}],null,!0)}),e._v(" "),t("Editor",{attrs:{editable:""},model:{value:e.form.body,callback:function(t){e.$set(e.form,"body",t)},expression:"form.body"}}),e._v(" "),t("validation-provider",{attrs:{name:"Tipo de demanda",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.errors;return[t(f.a,{attrs:{label:"Tipo de demanda",items:e.demandTypes,"item-value":"value","item-text":"label",outlined:"","error-messages":r},on:{change:e.setBillable},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})]}}],null,!0)}),e._v(" "),t("validation-provider",{attrs:{name:"Prioridade",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.errors;return[t(f.a,{attrs:{label:"Prioridade",items:e.demandPriorities,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})]}}],null,!0)}),e._v(" "),"admin"===e.$auth.user.role?t("validation-provider",{attrs:{name:"Status da demanda",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.errors;return[t(f.a,{attrs:{label:"Status da demanda",items:e.demandStatus,"item-value":"value","item-text":"label",outlined:"","error-messages":r},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})]}}],null,!0)}):e._e(),e._v(" "),"admin"===e.$auth.user.role?t("validation-provider",{attrs:{name:"Pontos",rules:"required|min_value:0"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.errors;return[t(_.a,{attrs:{label:"Pontos",type:"number",outlined:"","error-messages":r},on:{input:e.pointsChanged},model:{value:e.form.points,callback:function(t){e.$set(e.form,"points",t)},expression:"form.points"}})]}}],null,!0)}):e._e(),e._v(" "),"admin"===e.$auth.user.role&&e.form.points<1?t(v.a,{attrs:{label:"Marcar como estimada",color:"success"},model:{value:e.form.estimated,callback:function(t){e.$set(e.form,"estimated",t)},expression:"form.estimated"}}):e._e(),e._v(" "),e.form.points>0?t("div",[t(v.a,{attrs:{label:"Você vai cobrar por essa demanda?",outlined:"",color:"success"},model:{value:e.form.billable,callback:function(t){e.$set(e.form,"billable",t)},expression:"form.billable"}}),e._v(" "),"admin"===e.$auth.user.role&&e.estimate&&e.estimate.estimate_in_days>0?t("div",[t("EstimateValues",{attrs:{item:e.estimate}})],1):e._e()],1):e._e(),e._v(" "),t("div",{staticClass:"d-flex justify-space-between align-center"},["admin"===e.$auth.user.role&&e.demand&&!e.demand.approved?t("Remove",{on:{confirm:e.remove}}):e._e(),e._v(" "),t("Save",{attrs:{invalid:l,label:"Salvar demanda",block:!1}})],1)],1)])]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DialogHeader:n(359).default,Editor:n(608).default,EstimateValues:n(605).default,Remove:n(635).default,Save:n(360).default})}}]);