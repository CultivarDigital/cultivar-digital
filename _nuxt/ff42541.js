(window.webpackJsonp=window.webpackJsonp||[]).push([[8,21],{507:function(e,t,n){"use strict";n.r(t);var o={props:{invalid:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!0},label:{type:String,default:"Salvar"}}},r=n(69),c=n(70),l=n.n(c),d=n(502),m=n(207),f=n(208),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.invalid?n("v-alert",{staticClass:"d-flex justify-center",attrs:{type:"error"}},[e._v("\n    Você deve corrigir os erros acima antes de salvar\n  ")]):e._e(),e._v(" "),n("v-btn",{staticClass:"mb-4 mt-4 font-weight-bold text-none",attrs:{"x-large":"",type:"submit",color:"primary",disabled:e.invalid||e.loading,block:e.block,rounded:""}},[e.loading?n("v-progress-circular",{attrs:{color:"secondary",indeterminate:"",size:"20"}}):n("span",[e._v(e._s(e.label))])],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:d.a,VBtn:m.a,VProgressCircular:f.a})},514:function(e,t,n){"use strict";n.r(t);var o={methods:{close:function(){this.$emit("close")}}},r=n(69),c=n(70),l=n.n(c),d=n(207),m=n(505),f=n(526),v=n(204),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{staticClass:"d-flex align-center justify-space-between"},[o("div",{staticClass:"d-flex align-center"},[o("img",{staticClass:"logo",attrs:{src:n(231)}}),e._v(" "),o("span",{staticClass:"ml-3"},[o("strong",[e._v("Cultivar")]),e._v(" Digital")])]),e._v(" "),o("v-btn",{attrs:{icon:""},on:{click:e.close}},[o("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),o("v-divider")],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VBtn:d.a,VContainer:m.a,VDivider:f.a,VIcon:v.a})},552:function(e,t,n){"use strict";n.r(t);n(11),n(12),n(18),n(19);var o=n(22),r=n(3),c=(n(71),n(4),n(15),n(13),n(184),n(144));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d={components:{ValidationObserver:c.a,ValidationProvider:c.b},props:{company:{type:Object,default:function(){return null}}},data:function(){return{dialog:!1,form:{name:"",corporate_name:"",cnpj:"",address:"",phone:"",email:"",notes:"",point_price:0,point_unit:"hour",points_per_day:0}}},computed:{baseUrl:function(){return"http://localhost:3000"}},created:function(){var e=this;this.company&&Object.keys(this.form).forEach((function(t){e.company[t]&&(e.form[t]=e.company[t])}))},methods:{save:function(){var e=this,form=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.form);this.company?this.$axios.$patch("/v1/companies/"+this.company._id,form).then((function(t){e.$notifier.success("Atualizado!"),e.$emit("change",t),e.dialog=!1})):this.$axios.$post("/v1/companies",form).then((function(t){e.$notifier.success("Salvo!"),e.dialog=!1,e.$emit("change",t)}))},toggleMonth:function(e){this.active_month===e?this.active_month=null:this.active_month=e},removeItem:function(e,t,n){this.form.data[e-1][t-1].splice(n,1)},copy:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.clipboard.writeText(e);case 2:t.notify("Copiado!");case 3:case"end":return n.stop()}}),n)})))()}}},m=d,f=n(69),v=n(70),_=n.n(v),y=n(207),h=n(538),x=n(505),k=n(651),O=n(535),j=n(204),C=n(533),$=n(555),component=Object(f.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[e.company?n("v-btn",e._g(e._b({attrs:{color:"secondary",dark:""}},"v-btn",r,!1),o),[n("v-icon",[e._v("mdi-pencil")])],1):n("v-btn",e._g(e._b({attrs:{color:"success",dark:""}},"v-btn",r,!1),o),[n("v-icon",[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",{staticClass:"template-form"},[n("DialogHeader",{on:{close:function(t){e.dialog=!1}}}),e._v(" "),n("v-container",{staticClass:"pt-6"},[n("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validate,r=t.invalid;return[n("v-form",{on:{submit:function(t){t.preventDefault(),o().then(e.save)}}},[n("validation-provider",{attrs:{name:"Nome da empresa",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("v-text-field",{attrs:{label:"Nome da empresa",outlined:"","error-messages":o},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)}),e._v(" "),n("v-text-field",{attrs:{label:"Razão social",outlined:""},model:{value:e.form.corporate_name,callback:function(t){e.$set(e.form,"corporate_name",t)},expression:"form.corporate_name"}}),e._v(" "),n("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["##.###.###/####-##"],expression:"['##.###.###/####-##']"}],attrs:{label:"CNPJ",outlined:""},model:{value:e.form.cnpj,callback:function(t){e.$set(e.form,"cnpj",t)},expression:"form.cnpj"}}),e._v(" "),n("v-textarea",{attrs:{rows:"2",label:"Endereço",outlined:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),e._v(" "),n("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],attrs:{label:"Telefone de contato",outlined:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e._v(" "),n("v-text-field",{attrs:{label:"Email de contato",outlined:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),n("v-textarea",{attrs:{label:"Observações",outlined:""},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}}),e._v(" "),"admin"===e.$auth.user.role?n("div",[n("v-text-field",{attrs:{label:"Pontos por dia",outlined:""},model:{value:e.form.points_per_day,callback:function(t){e.$set(e.form,"points_per_day",t)},expression:"form.points_per_day"}}),e._v(" "),n("v-text-field",{attrs:{label:"Preço do ponto",outlined:""},model:{value:e.form.point_price,callback:function(t){e.$set(e.form,"point_price",t)},expression:"form.point_price"}})],1):e._e(),e._v(" "),e.company?n("v-btn",{staticClass:"mb-6",attrs:{small:""},on:{click:function(){return e.copy(e.baseUrl+"/cadastrar?cliente="+e.company._id)}}},[n("v-icon",{attrs:{left:"",small:""}},[e._v(" mdi-content-copy ")]),e._v("\n            Copiar link de cadastro\n          ")],1):e._e(),e._v(" "),n("div",{staticClass:"text-right"},[n("Save",{attrs:{invalid:r,block:!1,label:"Salvar"}})],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;_()(component,{DialogHeader:n(514).default,Save:n(507).default}),_()(component,{VBtn:y.a,VCard:h.a,VContainer:x.a,VDialog:k.a,VForm:O.a,VIcon:j.a,VTextField:C.a,VTextarea:$.a})},601:function(e,t,n){"use strict";n.r(t);var o=n(22),r=(n(105),n(4),n(71),{data:function(){return{companies:null,company:null,companyId:"63d97b2c5747470022a80cd8"}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("admin"!==e.$auth.user.role){t.next=3;break}return t.next=3,e.loadCompanies();case 3:e.companyId&&e.companySelected(e.companyId);case 4:case"end":return t.stop()}}),t)})))()},methods:{companyUpdated:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadCompanies();case 2:e.companyId&&e.companySelected(e.companyId);case 3:case"end":return t.stop()}}),t)})))()},loadCompanies:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/v1/companies");case 2:e.companies=t.sent;case 3:case"end":return t.stop()}}),t)})))()},companySelected:function(e){this.company=e?this.companies.find((function(t){return t._id===e})):null,this.$emit("input",this.company)}}}),c=n(69),l=n(70),d=n.n(l),m=n(505),f=n(646),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"pt-6",attrs:{fluid:""}},["admin"===e.$auth.user.role?n("div",[e.companies?n("div",[n("div",{staticClass:"d-flex align-center justify-space-between"},[n("div",[n("v-select",{attrs:{"hide-details":"auto",items:e.companies,label:"Todas as clientes","item-value":"_id","item-text":"name",clearable:"",outlined:""},on:{change:e.companySelected},model:{value:e.companyId,callback:function(t){e.companyId=t},expression:"companyId"}})],1),e._v(" "),n("div",{staticClass:"text-right"},[n("CompanyForm",{on:{change:e.companyUpdated}}),e._v(" "),e.company?n("CompanyForm",{attrs:{company:e.company},on:{change:e.companyUpdated}}):e._e()],1)])]):e._e()]):e._e()])}),[],!1,null,null,null);t.default=component.exports;d()(component,{CompanyForm:n(552).default}),d()(component,{VContainer:m.a,VSelect:f.a})}}]);